# ROOT is the province the holding will be in
# FROM is the character constructing it
castle = {
	trigger = {
	}
}

city = {
	trigger = {
	}
}

temple = {
	trigger = {
	}
}

trade_post = {
	trigger = {
		# Conditional Tooltips for easier reading
		conditional_tooltip = {
			trigger = {
				has_game_rule = { 	# Anyone can freely build TPs.
									# NOTE: Normal restrictions still apply, 
									# ie non-MRs can only build on routes. This is hardcoded
					name = tp_construction
					value = free
				}
			}
		}
		conditional_tooltip = {
			trigger = {
				has_game_rule = { 	# Anyone can freely build TPs.
									# NOTE: Normal restrictions still apply, 
									# ie non-MRs can only build on routes. This is hardcoded
					name = tp_construction
					value = mr_coast
				}
			}
			OR = {
				AND = {
					port = yes
					FROM = {
						is_patrician = yes
					}
				}
				port = no
			}
		}
		conditional_tooltip = {
			trigger = {
				has_game_rule = { 	# Only MRs are allowed to build any TPs
					name = tp_construction
					value = only_mr
				}
			}
			FROM = {
				is_patrician = yes
			}
		}
		conditional_tooltip = {
			trigger = {
				FROM = { is_patrician = yes }
				is_caspian_port = yes
			}
			custom_tooltip = {
				text = TOOLTIP_NO_CASPIAN_TPS
				hidden_tooltip = {
					AND = {
						FROM = {
							is_patrician = yes
						}
						is_caspian_port = yes
						trade_route = silk_road
						PREV = { holder_scope = { character = FROM } } # Patrician personally holds it
					}
				}
			}
		}
		
		# Actual rules go below this line
		hidden_tooltip = {
			NOR = { 
				# offmap provinces can't build there anyways
				province_id = 1587 
				province_id = 1607 
				province_id = 1608 
				province_id = 1613 
				province_id = 1635
			}
			OR = {
				AND = { # The distance/cost calculation is broken for the Caspian, being far too cheap, so we'll just disable them there
					FROM = { # Patricians may build there if they own the province
						is_patrician = yes
						PREV = { holder_scope = { character = FROM } } # Patrician doesn't personally hold the province
					}
					is_caspian_port = yes
				}
				FROM = { is_patrician = no } # None patricians obey the normal rules
				NOT = { is_caspian_port = yes } Ignore this rule outside of the Caspian
			}
			OR = { 
				AND = { # Only silk road provinces may be used in the Caspian for TPs
					is_caspian_port = yes
					trade_route = silk_road 
				}
				is_caspian_port = no # Ignore this rule outside of the Caspian
			}
			OR = {
				has_game_rule = { 	# Anyone can freely build TPs.
									# NOTE: Normal restrictions still apply, 
									# ie non-MRs can only build on routes. This is hardcoded
					name = tp_construction
					value = free
				}
				AND = { # Only MRs are allowed to use coastal slots for TPs with the mr_coast rule
					port = yes
					FROM = {
						is_patrician = yes
					}
					has_game_rule = {
						name = tp_construction
						value = mr_coast
					}
				}
				AND = { # Both MRs and non-MRs are allowed to use inlands slots for TPs on trade routes
					port = no
					has_game_rule = {
						name = tp_construction
						value = mr_coast
					}
				}
				AND = { # Only MRs are allowed to build any TPs
					FROM = {
						is_patrician = yes
					}
					has_game_rule = {
						name = tp_construction
						value = only_mr
					}
				}
			}
		}
	}
}

family_palace = {
	trigger = {
	}
}

tribal = {
	trigger = {
	}
}

nomad = {
	trigger = {
	}
}

fort = {
	trigger = {
	}
}

hospital = {
	trigger = {
	}
}
